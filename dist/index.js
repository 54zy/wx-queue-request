!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n["wx-queue-request"]=e()}(this,function(){"use strict";function n(n){return function(e){i.push(function(t){var r=e.complete;e.complete=function(){t(),"function"==typeof r&&r.apply(void 0,arguments)},n(e)})}}function e(){var e=wx.request;Object.defineProperty(wx,"request",{get:function(){return n(e)}})}var t=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")},r=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),u=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(null==n)n=1;else if(0===n)throw new Error("Concurrency must not be zero");return n},i=new(function(){function n(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t(this,n),this.worker=e,this.concurrency=u(r),this.running=0,this.tasks=[]}return r(n,[{key:"push",value:function(n){this.tasks.push(n),this.run()}},{key:"run",value:function(){var n=this,e=this.running,t=this.concurrency,r=this.tasks,u=this.worker;if(e<t&&r.length){var i=r.shift();this.running++,u(i,function(){n.running--,n.run()})}}}]),n}())(function(n,e){return n(e)},10);return{queueRequest:n,queue:e}});
